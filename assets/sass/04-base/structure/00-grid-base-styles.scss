
//================================================*\
/*	GRID STYLING FILE						*/
//----------------------------------------------------
//	This file holds the code that generates the
//	classes for the grid system.
//
//	DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT
//	YOU'RE DOING!
//================================================*/


//switches IE (and other non-flexbox friendly browsers) to using float mode
@mixin M-ieFloat {
	.no-flexbox & {
		display: block;
		@extend %clearfix;
		& > .grid__cell {
			float: left;
			display: block;
		}
	}
}


//================================================*\
/*				GRID WIDTHS						*/
//----------------------------------------------------
//	Quickly and easily apply standard percentage
//	widths to grid cells based on fractions.
//
//	step 1: give container the width modifier class.
//			eg: grid--thirds
//	step 2: give extra wide grid span classes
//			eg. grid__cell--span2
//	WARNING: using a span class will likely require additional
//			 styling for tablets and smaller devices
//
//	EXAMPLE HTML:
//	<ul class="grid grid--thirds">
//		<li class="grid__cell">Column is 1/3 wide on desktop</li>
//		<li class="grid__cell grid__cell--span2">column is 2/3 wide on desktop</li>
//	</ul>
//================================================*/

@for $i from 1 through length($cellWidths) {
	$array: nth($cellWidths, $i);
	$class: map-get($array, class);
	$defaultWidth: map-get($array, default);
	$breaks: map-get($array, breaks);

//sets the default grid__cell widths
	.grid--#{$class} {
		> .grid__cell {
			//width: percentage(1/$i); //The clever way :D
			width: $defaultWidth; //more editable way -_-

//.grid__cell--span-# styling
			@if ($i > 2){
				@for $x from 2 through ($i - 1) {
					&--span-#{$x} { width: $defaultWidth * $x; }
				}
			}
		}

//Applies the media queries for the break points
		&:not(.grid--disableMQs) {
			@if ($breaks != false) {
				@for $y from 1 through length($breaks) {
					$breakData : nth($breaks, $y);
					$device : nth($breakData, 1);
					$width : nth($breakData, 2);
					@include M-mq(max,$device){
						> .grid__cell { width: $width; }
					}
				}
			}
		}
		.no-flexbox &.grid--enableWrapping > .grid__cell {
			@if ($i > 2) {
				&:nth-child(#{$i}n+1) { clear: left; }
			}
		}
	}
}


//base grid styling
.grid {
	@extend %noDots;
	min-width: 100%;
	border: 0 solid #000;
	@include M-gt-ie8 {
		@extend %flex;
		@include M-prefix(align-content, stretch, $flexPrefixes);

		@include M-mq(max,bp('page')){
			@include M-not('.grid--disableMQs', '.grid--noWrap'){
				@include M-flexWrap;
			}
		}
	}

//grid-wrap styling... really only necessary for use with grid--gutter-#
	&__wrap {
		overflow: hidden;
	}

//base grid__cell styling
	&__cell {
		display: block;
		padding: 0;
		margin: 0;
		background-clip: padding-box!important;
		border: 0 solid transparent;
		@include M-flexGrow;
		outline-color: #000;
		border-color: #000;

//grid__cell--forceWidth-# styling for elements that must always be a certain width at ALL screen sizes
		@each $class, $width in $forcedWidths {
			&--forceWidth-#{$class} {
				@include M-flexForceWidth($width);
			}
		}
	}

//base grid__inner styling
		&__inner {
			border: 0 solid #000;
		}

//grid--border-# styling
	@each $border in $cellBorders {
		&--border-#{$border} {
			$border: $border * 1px;
			border-width: $border 0 0 $border;
			> .grid__cell {
				border-width: 0 $border $border 0;
			}
			&[class*="grid--gutter-"] {
				> .grid__cell {
					> .grid__inner {
						border-width: $border;
					}
				}
			}
		}
	}

//grid--gutter-# styling
	&[class*="grid--gutter-"] {
		&.grid--outerGutters {
			margin: 0;
			&-v {
				margin-top: 0;
				margin-bottom: 0;
			}
			&-h {
				margin-left: 0;
				margin-right: 0;
			}
		}

		> .grid__cell, & {
			border-color: transparent;
			@include M-lt-ie9 {
				border-color: $gutter-ieFallback;
			}
		}
		/*.lt-ie10 & {
			border-left: 0;
			margin-left: 0;
		}*/
	}

	@mixin M-grid-cellGutter ($gutter){
		margin: -$gutter;
		border-width: $gutter 0 0 $gutter;
		> .grid__cell {
			border-width: 0 $gutter $gutter 0;
		}
	}
	@mixin M-grid-delayedGutter($gutter) {
		&.grid--outerGutters-delayedHorizontal {
			@include M-mq(max, (bp('page') + $gutter)){
				margin-left: 0;
				margin-right: 0;
			}
		}
	}
	@each $class, $gutter in $cellGutters {
		&--gutter-#{$class} {
			@if (length($gutter) > 1) {
				@each $screenSize, $value in $gutter {
					@if ($screenSize == 'default') {
						@include M-grid-cellGutter($value);
					} @else {
						@include M-mq(max,$screenSize){
							@include M-grid-cellGutter($value);
						}
					}
					@include M-grid-delayedGutter($value);
				}
			} @else {
				@include M-grid-cellGutter($gutter);
				@include M-grid-delayedGutter($gutter);
			}
		}
	}

//grid--padding-# styling
	@each $pad in $cellPadding {
		&--padding-#{$pad} {
			> .grid__cell {
				padding: $pad * 1px;
			}
			&.grid--hasInners {
				> .grid__cell > .grid__inner {
					padding: $pad * 1px;
				}
			}
		}
	}

//vertical alignment code
	@include M-gt-ie8 {
		&--vAlign {
			> .grid__cell {
				@extend %flexValign;
			}
			&.grid--hasInners {
				> .grid__cell > .grid__inner {
					@extend %flexValign;
				}
			}
		}
	}

	&--hasInners {
		> .grid__cell {
			@extend %flex;
			@include M-prefix(flex-direction,column, $flexPrefixes);
			> .grid__inner {
				@include M-prefix(flex-grow,1, $flexPrefixes);
			}
		}
		&[class*="grid--padding-"] {
			> .grid__cell {
				padding: 0!important;
			}
		}
	}

//tabular backup for IE9 and below
	.no-flexbox & {
		display: table;
		width: 100%;
		> .grid__cell { display: table-cell; vertical-align: top; }
		&__inner { display: block; }
	 	&--vAlign > .grid__cell { vertical-align: middle; }
	}


//Unfortunately this is a necessity for IE compatibility
	&--enableWrapping {
		@include M-ieFloat;

		@include M-gt-ie8 {
			.flexbox & {
				@include M-flexWrap;
			}
		}
	}

//allows IE to use floats instead of display table without affecting modern browsers
	&--ieFloat {
		@include M-ieFloat;
	}
}



