
//================================================*\
/*	GRID STYLING FILE						*/
//----------------------------------------------------
//	This file holds the code that generates the
//	classes for the grid system.
//
//	DO NOT EDIT THIS FILE UNLESS YOU REALLY KNOW
//	WHAT YOU'RE DOING!
//================================================*/


//================================================*\
/*				GRID WIDTHS						*/
//----------------------------------------------------
//	Quickly and easily apply standard percentage
//	widths to grid cells based on fractions.
//
//	step 1: give container the width modifier class.
//			eg: grid--thirds
//	step 2: give extra wide grid span classes
//			eg. grid__cell--span2
//	WARNING: using a span class will likely require additional
//			 styling for tablets and smaller devices
//
//	EXAMPLE HTML:
//	<ul class="grid grid--cols-3">
//		<li class="grid__cell">Column is 1/3 wide on desktop</li>
//		<li class="grid__cell grid__cell--span-2">column is 2/3 wide on desktop</li>
//	</ul>
//================================================*/


$grid-bp-list: if(
	$gridBreakPoints == false,//*enable or disable media queries easily*/
	false false false false false false,
	$gridBreakPoints
);

$highestColumnCount: length($grid-bp-list);

@mixin M-grid-cellGutter($gutter, $width, $colCount, $alteredWidth){
	> .grid__cell {
		$modifier: $gutter / $colCount;

		@if (unit($gutter) == 'px'){
			//width: $width;
			width: calc(#{$width} + #{$modifier} - #{$gutter});
		} @else if (unit($gutter) == '%'){
			$newWidth: $width + $modifier - $gutter;
			width: $newWidth;//*($width - $gutter) +*/
		}
		margin-right: $gutter;
		margin-bottom: $gutter;

		//last column
		&:nth-child(#{$colCount}n) {
			margin-right: 0;
		}

		//last row
		&:nth-last-child(-n + #{$colCount}) {
			margin-bottom: 0;
		}
	}
}

@for $i from 1 through $highestColumnCount {
	$columnWidth: percentage(1/$i);
	$breaks: nth($grid-bp-list, $i);

//sets the default grid__cell widths
	.grid--cols-#{$i} {
		> .grid__cell {
			width: $columnWidth;

//.grid__cell--span-# styling
			@if ($i > 1){
				@for $x from 2 through $i {
					&--span-#{$x} { width: $columnWidth * $x; }
				}
			}
		}

		@each $class, $gutter in $cellGutters {
			&.grid--gutter-#{$class} {
				@if (type-of($gutter) == 'list') {
					@each $value in $gutter {
						@if (length($value) > 1){
							$gutterSize: nth($value,1);
							$mediaQuery: nth($value,2);
							@include MG-mq($mediaQuery){
								@include M-grid-cellGutter($gutterSize, $columnWidth, $i);
							}
						} @else {
							@include M-grid-cellGutter($value, $columnWidth, $i);
						}
					}
				} @else {
					@include M-grid-cellGutter($gutter, $columnWidth, $i);
				}
			}
		}

//Applies the media queries for the break points
		&:not(.grid--disableMQs) {
			@if ($breaks != false) {
				@each $breakData in $breaks {
					$BP-widthChange : nth($breakData, 1);
					$V-columnWidth : nth($breakData, 2);
					@include MG-mq(max,$BP-widthChange){
						> .grid__cell { width: $MQ-columnWidth; }

						&[class*="grid--gutter-"]{
							> .grid__cell {
								@if ($V-columnWidth == 50%){
									&:nth-child(2n) {
										margin-right: 0;
									}
								} @else if ($V-columnWidth == 33.33%){
									&:nth-child(3n) {
										margin-right: 0;
									}
								}
							}
						}
					}
				}
			}
		}
		.no-flexbox &.grid--wrap > .grid__cell {
			@if ($i > 2) {
				&:nth-child(#{$i}n+1) { clear: left; }
			}
		}
	}
}




//base grid styling
.grid {
	flex-wrap: wrap;
	@extend %noDots;
	min-width: 100%;
	border: 0 solid #000;
	display: flex;
	align-content: stretch;

//grid-wrap styling... really only necessary for use with grid--gutter-#
	&__wrapper {
		overflow: hidden;
	}

	&[class*="grid--gutter-"] {
		> .grid__cell {
			&:last-child {
				margin-right: 0;
			}
		}
	}

//base grid__cell styling
	&__cell {
		min-width: 0%;
		max-width: 100%;
		display: block;
		padding: 0;
		margin: 0;
		background-clip: padding-box!important;
		border: 0 solid transparent;
		flex-grow: 1;
		outline-color: #000;
		border-color: #000;

		&--vAlign {
			align-self: center;
		}
		&.grid { display: flex; }
		&, * > {
			//helps fix IE10 word-wrap bug (elements need to not be display:inline for the fix to work though)
			max-width: 100%;
			flex-shrink: 1;
		}

		&--noGrowth {
			flex-grow: 0;
		}
		&--noShrink {
			flex-shrink: 0;
		}
	}

//base grid__inner styling
		&__inner {
			//
		}

	&--hasInners {
		> .grid__cell {
			display: flex;
			align-items: stretch;

			> .grid__inner {
				display: block;
				width: 100%;

				&.grid {
					display: flex;
				}
			}
		}
	}

//vertical alignment code
	&--vAlign {
		&:not(.grid--hasInners){
			> .grid__cell {
				display: flex;
				align-items: center;
			}
		}
		&.grid--hasInners {
			align-items: stretch;

			> .grid__cell > .grid__inner {
				display: flex;
				align-items: center;
			}
		}
		&-centered {
			&.grid--hasInners > .grid__cell > .grid__inner,
			&:not(.grid--hasInners) > .grid__cell {
				justify-content: center;
			}
		}
	}


	&--vertical {
		flex-direction: column;
	}

	&--noGrowth {
		> .grid__cell { flex-grow: 0; }
	}

	&--shrinkable {
		min-width: 0;
	}

	&--space {
		&-between, &-around {
			> .grid__cell { flex-grow: 0; }
		}
		&-between {
			justify-content: space-between;
		}
		&-around {
			justify-content: space-around;
		}
	}

	&--align {
		&-left, &-center, &-right {
			> .grid__cell { flex-grow: 0; }
		}
		&-left {
			justify-content: flex-start;
		}
		&-left {
			justify-content: center;
		}
		&-right {
			justify-content: flex-end;
		}
	}


//Unfortunately this is a necessity for IE compatibility
	&--noWrap {
		flex-wrap: nowrap;
	}

}



